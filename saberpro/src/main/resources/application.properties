# ============================================
# CONFIGURACIÓN DEL SISTEMA SABER PRO/TyT
# ============================================

# ============================================
# NOMBRE DE LA APLICACIÓN
# ============================================
spring.application.name=Sistema Saber Pro

# ============================================
# CONFIGURACIÓN DEL SERVIDOR
# ============================================
server.port=8080

# ============================================
# CONFIGURACIÓN MYSQL (Clever Cloud)
# ============================================
spring.datasource.url=jdbc:mysql://bfowank0kug8sltrdku7-mysql.services.clever-cloud.com:3306/bfowank0kug8sltrdku7?useSSL=false&serverTimezone=UTC&allowPublicKeyRetrieval=true
spring.datasource.username=u3wdpitinegv4bqa
spring.datasource.password=iv4vBns5IvozkF6ickR2
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# ============================================
# CONFIGURACIÓN JPA / HIBERNATE
# ============================================
spring.jpa.database-platform=org.hibernate.dialect.MySQL8Dialect

# ⭐ MODO DE CREACIÓN DE TABLAS
# create-drop: Borra y recrea las tablas cada vez (DESARROLLO)
# update: Solo actualiza cambios (PRODUCCIÓN) ✅ RECOMENDADO
# validate: Solo valida que la BD coincida con las entidades
# create: Crea las tablas al iniciar (no las borra al cerrar)
spring.jpa.hibernate.ddl-auto=update

# Mostrar SQL en consola (útil para debugging)
spring.jpa.show-sql=true

# Formatear el SQL en consola para mejor legibilidad
spring.jpa.properties.hibernate.format_sql=true

# Comentarios en el SQL generado
spring.jpa.properties.hibernate.use_sql_comments=true

# Configuración de pool de conexiones
spring.datasource.hikari.maximum-pool-size=5
spring.datasource.hikari.minimum-idle=2
spring.datasource.hikari.connection-timeout=20000

# ============================================
# CONFIGURACIÓN DE THYMELEAF
# ============================================
# Ubicación de las plantillas
spring.thymeleaf.prefix=classpath:/templates/

# Sufijo de las plantillas
spring.thymeleaf.suffix=.html

# Modo de plantilla
spring.thymeleaf.mode=HTML

# Codificación
spring.thymeleaf.encoding=UTF-8

# Cache (false en desarrollo para ver cambios inmediatos)
spring.thymeleaf.cache=false

# ============================================
# CONFIGURACIÓN DE RECURSOS ESTÁTICOS
# ============================================
# Ubicación de archivos estáticos (CSS, JS, imágenes)
spring.web.resources.static-locations=classpath:/static/

# Cache de recursos estáticos
spring.web.resources.cache.period=0

# ============================================
# CONFIGURACIÓN DE MENSAJES Y LOGGING
# ============================================
# Nivel de logging
logging.level.root=INFO
logging.level.com.universidad.saberpro=DEBUG
logging.level.org.springframework.web=DEBUG
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE

# Patrón de log en consola
logging.pattern.console=%clr(%d{yyyy-MM-dd HH:mm:ss.SSS}){faint} %clr(${LOG_LEVEL_PATTERN:%5p}) %clr(${PID:- }){magenta} %clr(---){faint} %clr([%15.15t]){faint} %clr(%-40.40logger{39}){cyan} %clr(:){faint} %m%n${LOG_EXCEPTION_CONVERSION_WORD:%wEx}

# ============================================
# CONFIGURACIÓN DE SPRING BOOT DEVTOOLS
# ============================================
# Habilitar reinicio automático en desarrollo
spring.devtools.restart.enabled=true

# Excluir carpetas del reinicio automático
spring.devtools.restart.exclude=static/**,public/**

# LiveReload (recarga automática del navegador)
spring.devtools.livereload.enabled=true

# ============================================
# CONFIGURACIÓN DE SESIONES HTTP
# ============================================
# Tiempo de expiración de sesión (en minutos)
server.servlet.session.timeout=30m

# Nombre de la cookie de sesión
server.servlet.session.cookie.name=SABERPRO_SESSION

# ============================================
# CONFIGURACIÓN DE MULTIPART (subida de archivos)
# ============================================
# Tamaño máximo de archivo
spring.servlet.multipart.max-file-size=10MB

# Tamaño máximo de request
spring.servlet.multipart.max-request-size=10MB

# ============================================
# CONFIGURACIÓN DE MENSAJES DE ERROR
# ============================================
# Incluir mensaje de error en respuestas
server.error.include-message=always

# Incluir binding errors
server.error.include-binding-errors=always

# Incluir stacktrace (solo en desarrollo)
server.error.include-stacktrace=on_param

# ============================================
# NOTAS IMPORTANTES
# ============================================
# 1. Base de datos: MySQL en Clever Cloud
# 2. Las tablas se crean automáticamente con ddl-auto=update
# 3. Los datos NO se borran al reiniciar la aplicación
# 4. Para ver los logs SQL detallados, verificar que estén en:
#    logging.level.org.hibernate.SQL=DEBUG
# ============================================